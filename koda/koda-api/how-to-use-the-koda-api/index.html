<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>
Usage | KoDa
</title>
<meta property="og:title" content="Usage">
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<link rel=stylesheet type=text/css media=screen href=https://koda.trafiklab.se/sass/main.min.bd4df286872ced317514d2143608b62ba293b7caade56de8702a14e6c79c582d.css>
</head>
<body class="type-koda with-sidebar">
<div id=page-container>
<header class=site-header>
<div class=top-navigation>
<div class=header-left>
<nav>
<ul>
<li class="tl-top-navigation-item header-logo"><a href=https://koda.trafiklab.se/><img src=https://koda.trafiklab.se/images/logo.svg class=logo></a>
</li>
<li class=tl-top-navigation-item>
<a href=/koda/>
The Koda Projekt
</a>
</li>
<li class=tl-top-navigation-item>
<a href=/about/>
About
</a>
</li>
</ul>
</nav>
</div>
<div class=header-right>
<a href=# class="tl-button tl-button--variant-primary user-link">API keys</a>
<button class=mobile-menu-button>
<div class=burger-menu-button__icons>
<div class="burger-menu-button__icon burger-menu-button__icon__1"></div>
<div class="burger-menu-button__icon burger-menu-button__icon__2"></div>
<div class="burger-menu-button__icon burger-menu-button__icon__3"></div>
</div>
</button>
</div>
</div>
<div class=vs-mobile>
<nav class=mobile-navigation>
<ul>
<li class=tl-mobile-navigation-item>
<a href=/koda/>
The Koda Projekt
</a>
</li>
<li class=tl-mobile-navigation-item>
<a href=/about/>
About
</a>
</li>
</ul>
<a href=#>API keys</a>
</nav>
</div>
</header>
<div id=page-content>
<div class=site-sidebar-wrapper>
<div class=menu>
<div class=menu__top>
<div class="tl-form-control-wrapper tl-form-control-wrapper--size-medium">
<div class=tl-form-control__prepend><svg viewBox="0 0 16 16" width="1em" height="1em" class="tl-icon tl-icon--inline" color="currentcolor"><path fill="currentcolor" fill-rule="evenodd" d="M6.795 1a5.795 5.795.0 014.548 9.388L15 14.044l-.956.956-3.656-3.657A5.795 5.795.0 116.796 1zm0 1.352a4.443 4.443.0 100 8.885 4.443 4.443.0 000-8.885z" clip-rule="evenodd"/></svg>
</div>
<label id=tl-textfield-7376805771428288>
<span class=tl-input-group__label>Search... </span>
</label>
<input aria-invalid=false class="tl-form-control fuzzy-search" aria-labelledby=tl-textfield-7376805771428288 width=fluid value>
</div>
</div>
<ul class="tl-side-navigation tl-side-navigation--small list">
<li class="tl-side-navigation tl-side-navigation__item">
<a class=tl-side-navigation__click-target href=https://koda.trafiklab.se/koda/>
<span class=title>The Koda Projekt</span>
</a>
</li>
<li class=tl-side-navigation__item>
<div class="tl-side-navigation__click-target tl-side-navigation-group">The KoDa API</div>
<ul class="tl-side-navigation tl-side-navigation--small"><li class=tl-side-navigation__item>
<a class="tl-side-navigation__click-target child-title" href=https://koda.trafiklab.se/koda/koda-api/what-is-the-koda-api/>About the KoDa API</a>
</li><li class=tl-side-navigation__item>
<a class="tl-side-navigation__click-target child-title" href=https://koda.trafiklab.se/koda/koda-api/examples/>Examples</a>
</li><li class=tl-side-navigation__item>
<a class="tl-side-navigation__click-target child-title tl-side-navigation__click-target--active" href=https://koda.trafiklab.se/koda/koda-api/how-to-use-the-koda-api/>Usage</a>
</li></ul>
</li><li class=tl-side-navigation__item>
<div class="tl-side-navigation__click-target tl-side-navigation-group">Jupiter hub</div>
<ul class="tl-side-navigation tl-side-navigation--small"><li class=tl-side-navigation__item>
<a class="tl-side-navigation__click-target child-title" href=https://koda.trafiklab.se/koda/jupyter-hub/the-jupiterhub-playground/>About JupiterHub</a>
</li><li class=tl-side-navigation__item>
<a class="tl-side-navigation__click-target child-title" href=https://koda.trafiklab.se/koda/jupyter-hub/example-a/>Easy examples</a>
</li></ul>
</li></ul>
</div>
</div>
<main class=main-content>
<div class=page>
<main id=site-content>
<div class=docs-header>
<h1 class=tl-h1>Usage
<a href=https://github.com/KoDa-project/KoDaWebSite/blob/main/content/koda/koda-api/how%20to%20use%20the%20KoDa%20API.md class=docs-header-vcs><img alt="Edit on Github" src=https://koda.trafiklab.se/images/github.svg>
</a></h1>
</div>
<h1 id=how-to-use-the-koda-api>How to use the KoDa API</h1>
<h2 id=quick-test>Quick Test</h2>
<p>To test that the API is live and the server is not down try
<a href=https://api.koda.trafiklab.se/KoDa/api/v2/hello>https://api.koda.trafiklab.se/KoDa/api/v2/hello</a></p>
<h2 id=normal-usage>Normal Usage</h2>
<p>The API has two primary mode of accessing the data the first is to download the GTFS files as the were prresented at Trafiklab at the time of download the other access method is from the Cassandra database</p>
<h2 id=request-of-access-keys>Request of access keys</h2>
<p>An access key is required to gain access to the KoDa API. The access key is requested thruogh the Samtrafikens and Trafiklabs open data API administrartion web pages. <a href=https://https://need.correct.url/here>https://need.correct.url/here</a></p>
<h2 id=gtfs-real-time-file-download>GTFS Real Time file download</h2>
<p>The following request to koda.linkoping-ri.se will create and return a tar.bz2 archive for the VehiclePositions feed for Östgötatrafiken for April 02, 2020.
The archive name is: <code>otraf-VehiclePositions-2020-04-02.tar.bz2</code> and it will be stored in the <code>./otraf/VehiclePositions/2020/04</code> folder.
If the same request is repeated the stored file will be returned. For the GTFSStatic feed the original file is returned which is a .zip file.</p>
<p><code>wget 'https://api.koda.trafiklab.se/KoDa/api/v2/gtfs-rt/otraf/VehiclePositions?date=2020-04-02&key=aVery53kRETk3Y'</code></p>
<p>To request only data for one hour add the <code>hour</code> parameter.
The archive name returned will be: <code>otraf-VehiclePositions-2020-05-25_12.tar.bz2</code></p>
<p><code>wget 'https://api.koda.trafiklab.se/KoDa/api/v2/gtfs-rt/otraf/VehiclePositions?date=2020-05-25&hour=12&key=aVery53kRETk3Y'</code></p>
<p><code>wget 'https://api.koda.trafiklab.se/KoDa/api/v2/gtfs-rt/otraf/TripUpdates?date=2020-05-26&hour=12&key=aVery53kRETk3Y'</code></p>
<p>Note: curl can be used as well but compression should be turned off as it results in corrupted files.</p>
<p>Valid values for feed are:</p>
<ul>
<li>VehiclePositions - file format is tar.bz2</li>
<li>TripUpdates - file format is tar.bz2</li>
<li>ServiceAlerts - file format is tar.bz2</li>
<li>GTFSStatic - file format is zip; this is the original file downloaded from the GTFS Regional Static API.</li>
</ul>
<p>Valid values for company are:</p>
<ul>
<li>dintur - Västernorrlands län: Only GTFSStatic</li>
<li>dt - Dalatrafik</li>
<li>klt - Kalmar länstrafik</li>
<li>krono - Kronobergs Länstrafik: Only GTFSStatic</li>
<li>otraf - Östgötatrafiken</li>
<li>sj - SJ + Snälltåget + Tågab: Only GTFSStatic</li>
<li>skane - Skånetrafiken</li>
<li>sl - Stockholm län: All feeds without VehiclePositions</li>
<li>ul - Uppsala län</li>
<li>varm - Värmlandstrafik+Karlstadbuss</li>
<li>vt - Västtrafik: Only GTFSStatic</li>
<li>xt - X-trafik</li>
</ul>
</main>
<footer class=docs-footer>
Last updated: June 29, 2021
| <a href=https://github.com/KoDa-project/KoDaWebSite/blob/main/content/koda/koda-api/how%20to%20use%20the%20KoDa%20API.md>Edit on Github</a>
</footer>
</div>
</main>
</div>
</div>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js></script>
<script type=text/javascript>var input=$("input.fuzzy-search");$(input).keyup(function(){$('.dropdown-list').show();var a=$(this).val();$('.tl-side-navigation li').each(function(){var b=a.length==0||$(this).text().toLowerCase().indexOf(a.toLowerCase())>0;$(this).toggle(b)})}),$(input).blur(function(){$('.dropdown-list').hide()})</script>
<script type=text/javascript>$('.tab-content').find('.tab-pane').each(function(c,d){var b=$(this).closest('.code-tabs').find('.nav-tabs'),a=$(this).attr('title');b.append('<li data-lang="'+a+'"><a href="JavaScript:void(0)">'+a+'</a></li')}),$('.code-tabs ul.nav-tabs').each(function(){$(this).find("li:first").addClass('active')}),$('.code-tabs .tab-content').each(function(){$(this).find("div:first").addClass('active')}),$('.nav-tabs a').click(function(b){b.preventDefault();var c=$(this).parent(),a=c.data('lang');$('.nav-tabs').find('.active').removeClass('active'),$('.nav-tabs li[data-lang="'+a+'"]').addClass('active'),$('.tab-pane.active').removeClass('active'),$('.tab-pane[title="'+a+'"]').addClass('active')});function createCopyButton(b){const a=document.createElement("button");a.className="copy-code-button",a.type="button",a.innerText="Copy",a.addEventListener("click",()=>copyCodeToClipboard(a,b)),addCopyButtonToDom(a,b)}async function copyCodeToClipboard(c,a){const b=a.querySelector(":last-child > pre > code").innerText;try{result=await navigator.permissions.query({name:"clipboard-write"}),result.state=="granted"||result.state=="prompt"?await navigator.clipboard.writeText(b):copyCodeBlockExecCommand(b,a)}catch(c){copyCodeBlockExecCommand(b,a)}finally{codeWasCopied(c)}}function copyCodeBlockExecCommand(e,b){const a=document.createElement("textArea");a.contentEditable='true',a.readOnly='false',a.className="copyable-text-area",a.value=e,b.insertBefore(a,b.firstChild);const c=document.createRange();c.selectNodeContents(a);const d=window.getSelection();d.removeAllRanges(),d.addRange(c),a.setSelectionRange(0,999999),document.execCommand("copy"),b.removeChild(a)}function codeWasCopied(a){a.blur(),a.innerText="Copied!",setTimeout(function(){a.innerText="Copy"},2e3)}function addCopyButtonToDom(c,a){a.insertBefore(c,a.firstChild);const b=document.createElement("div");b.className="highlight-wrapper",a.parentNode.insertBefore(b,a),b.appendChild(a)}document.querySelectorAll(".highlight").forEach(a=>createCopyButton(a))</script>
<script type=text/javascript>$('.dropdown-list').hide(),$('.tl-side-navigation__click-target--active').parents('.dropdown-list').show(),$('.tl-side-navigation__click-target--active').siblings('.dropdown-list').show(),$('.tl-side-navigation__click-target--active').find('.dropdown-toggle').addClass('active'),$('.dropdown-toggle').click(function(a){a.preventDefault(),$(this).toggleClass('active'),$(this).parent().parent().find('> .dropdown-list').slideToggle()})</script>
<script type=text/javascript>$(document).ready(function(){$(".mobile-menu-button").click(function(){$(this).toggleClass("is-open"),$(".mobile-navigation").toggleClass("is-open")})})</script>
</body>
</html>